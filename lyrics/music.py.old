from datetime import datetime

with open("lyrics.txt") as srt:
	title = srt.readline()
	lines = srt.readlines()

	with open("lyrics.xml", "w", newline="\n") as output:
		output.write("<LYRICS>")
		i = 0
		while i < len(lines):
			id = lines[i].strip()
			if not id:
				continue
			output.write("<VERSE>")

			if i + 1 < len(lines):
				interval = lines[i + 1].strip()
			line = lines[i + 2].strip()
			output.write("<LINE>")
			output.write(" ".join(line.split()[1:]))

			output.write("</LINE>")

			output.write("<LENGTH>")
			stamps = interval.split(" --> ")
			stamps = [stamp.split(",")[0] for stamp in stamps]
			print(f"{interval = }")
			stamps = [datetime.strptime(stamp, "%X") for stamp in stamps]
			print(stamps)

			duration = stamps[1] - stamps[0]
			duration = duration.seconds * 1000
			output.write(f"{duration}") 
			output.write("</LENGTH>")

			output.write("</VERSE>\n")
			i += 4

		output.write("</LYRICS>")
