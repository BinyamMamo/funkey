<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Funkey | Home page</title>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Rubik+Glitch+Pop&display=swap" rel="stylesheet">

	<!-- Bootstrap core CSS -->
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
		integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />

	<!-- Additional CSS Files -->
	<link rel="stylesheet" href="css/upload.css">
	<link rel="stylesheet" href="css/funkey.css">
	<link rel="stylesheet" href="css/owl.css">
	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" href="css/homepage.css">
	<link rel="stylesheet" href="css/levels.css">
	<link rel="stylesheet" href="css/toasts.css">

	<link rel="shortcut icon" href="assets/icon/logo.ico" type="image/x-icon">

	<style>
		.most-popular {
			margin-top: 0px;
		}

		.upload-modal .upload-container {
			background-color: #1f2122;
			position: fixed;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);

			width: 700px;
			display: flex;
			flex-direction: column !important;
			gap: 1em;
			justify-content: center;
			align-items: center;
		}

		.upload-modal .upload-header {
			background-color: transparent;
			color: #e1e1e1;
			border-color: #5e8de720 !important;
			font-size: 1.5rem;
			font-weight: normal;
			width: 100%;
			text-align: left;
			padding-left: 1em;
		}

		.library-filter li {
			cursor: pointer;
			transition: font-weight 0.15s ease;
		}

		.library-filter li:hover {
			font-weight: bold;
		}

		.library-filter li:first-child:hover {
			border-bottom: 1px solid #1f212299;
		}

		.library-filter li:last-child:hover {
			border-top: 1px solid #1f212299;
		}
	</style>
</head>

<body>

	<!-- ***** Header Area Start ***** -->
	<header class="header-area header-sticky">
		<nav class="main-nav">
			<!-- ***** Logo Start ***** -->
			<a href="/" class="logo">
				<img src="/assets/images/logo.png" alt="">
				<h4 class="logo-header">
					FunKey
				</h4>
			</a>
			<!-- ***** Logo End ***** -->

			<!-- ***** Search End ***** -->
			<div class="search-input">
				<form id="search" action="#">
					<input type="text" placeholder="Type Something" id='searchText' name="searchKeyword" onkeypress="handle" />
					<i class="fa fa-search"></i>
				</form>
			</div>
			<!-- ***** Search End ***** -->
			<!-- ***** Menu Start ***** -->
			<ul class="nav">
				<li><a href="/" class="active">Home</a></li>
				<li><a href="browse.html">Browse</a></li>
				<li><a href="details.html">Details</a></li>
				<li><a href="match.html">Match</a></li>
				<% if (!avatar) { %>
					<li><a href="/login" class="active">Login</a></li>
					<% } else { %>
						<li><a href="/profile">Profile <img src="<%= avatar %>" alt=""></a></li>
						<% } %>
							<!-- <li><a href="profile.html">Login <img src="assets/images/logo.png" alt=""></a></li> -->
			</ul>
			<a class='menu-trigger'>
				<span>Menu</span>
			</a>
			<!-- ***** Menu End ***** -->
		</nav>
	</header>
	<!-- ***** Header Area End ***** -->

	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="page-content">

					<!-- ***** Most Popular Start ***** -->
					<div class="most-popular">
						<div class="row">
							<div class="col-lg-12">
								<div class="heading-section">
									<h4><em>Most Popular</em> Right Now</h4>
									<div class="dropdown">
										<button class="btn btn-warning dropdown-toggle" data-toggle="dropdown" aria-expanded="false"
											type="button">
											<i class="fas fa-sort"></i> Sort
										</button>
										<ul class="dropdown-menu bg-dark w-25">
											<li><a class="dropdown-item bg-dark text-light" href="#"><i
														class="fas fa-sort-alpha-down"></i>&nbsp; Name</a></li>
											<li><a class="dropdown-item bg-dark text-light" href="#"><i
														class="fas fa-sort-amount-down"></i>&nbsp; Popularity</a></li>
										</ul>
									</div>

								</div>
								<div class="row">
									<div class="col-lg-3 col-sm-6">
										<div class="item">
											<div class="upload" data-toggle="modal" data-target="#uploadModal">
												<i class="fas fa-cloud-upload-alt"></i>
												<!-- <i class="fa fa-cloud-upload" aria-hidden="true"></i> -->
												<!-- <i class="fa fa-upload" aria-hidden="true"></i> -->
											</div>

											<div class="footnote upload-caption">
												<h4 class="text-truncate"><span>Upload Music</span><span>upload your Music</span></h4>
												<ul>
													<!-- <li><i class="bi bi-collection-play"></i>&nbsp; 0</li> -->
													<!-- <li><i class="fa fa-upload"></i>&nbsp; 0</li> -->
													<li><i class="fa fa-music"></i>&nbsp; 0</li>
													<!-- <li><i class="bi bi-upload"></i>&nbsp; 0</li> -->
													<!-- <li><i class="fa fa-cloud-upload"></i>&nbsp; 23</li> -->
												</ul>
											</div>
										</div>
									</div>

									<% musics.forEach(music=> { %>

										<div class="col-lg-3 col-sm-6">
											<div class="item music-card">
												<div class="thumbnail" data-toggle="modal" data-target="#levelsModal" data-id="<%= music._id %>"
													data-image-url="<%= music.thumbnail %>">
													<div class="play-icon-container">
														<i class="bi bi-play-circle"></i>
													</div>
													<input type="hidden" name="music" value="<%= music._id %>">
													<input type="hidden" name="favorite" value="<%= music.favorite %>">
												</div>


												<div class="footnote caption">
													<h4 class="text-truncate"><span>
															<%= music.artist %>
														</span><span>
															<%= music.title %>
														</span></h4>
													<ul>
														<li><i class="fa fa-thumbs-up"></i>
															<%= music.rating.toFixed(1) %>
														</li>
														<li><i class="fas fa-users"></i>
															<%= music.views %>
														</li>
													</ul>
												</div>
											</div>
										</div>

										<% }); %>


								</div>
							</div>
						</div>
					</div>
					<!-- ***** Most Popular End ***** -->

					<!-- ***** Gaming Library Start ***** -->
					<div class="gaming-library">
						<div class="col-lg-12">
							<div class="heading-section">
								<h4><em>Your Music</em> Library</h4>
								<div class="dropdown">
									<button class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-expanded="false"
										type="button">
										<i class="fas fa-filter"></i> <b>Filter</b>
									</button>
									<ul class="dropdown-menu bg-dark w-25 library-filter">
										<li class="dropdown-item bg-dark text-light favorites">
											<i class="fas fa-star text-warning"></i>&nbsp; Favourites
										</li>
										<li class="dropdown-item bg-dark text-light uploaded">
											<i class="fas fa-cloud-upload-alt text-primary"></i>&nbsp; Uploaded
										</li>
									</ul>
								</div>
							</div>

							<div class="music-library" style="display: block; margin-left: 3em; margin-right: 1em;">

							</div>
						</div>
						<div class="col-lg-12">
							<div class="main-button view-library-btn">
								<a href="/">View Your Library</a>
							</div>
						</div>
					</div>
					<!-- ***** Gaming Library End ***** -->
				</div>
			</div>
		</div>
	</div>

	<footer>
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<p>Copyright Â© 2036 <a href="#">Funkey</a> Company. All rights reserved.

						<br>Design: <a href="https://templatemo.com" target="_blank" title="free CSS templates">TemplateMo</a>
					</p>
				</div>
			</div>
		</div>
	</footer>




	<!-- Modals -->
	<div class="modal fade levels-modal" tabindex="-1" id="levelsModal" aria-labelledby="levelsModalLabel"
		aria-hidden="true">
		<%- include('levels.ejs') %>
	</div>

	<!-- Modals 2 -->
	<div class="modal fade upload-modal" tabindex="-1" id="uploadModal" aria-labelledby="uploadModalLabel"
		aria-hidden="true">
		<%- include('upload.ejs') %>
	</div>

	<!-- Bootstrap JS and dependencies -->
	<!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script> -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

	<!-- <script src="assets/js/isotope.min.js"></script>
	<script src="assets/js/owl-carousel.js"></script>
	<script src="assets/js/tabs.js"></script> -->
	<script src="/js/popup.js" defer></script>
	<script src="/js/custom.js" defer></script>
	<script src="/js/levels.js" defer></script>
	<script src="/js/upload.js" defer></script>
	<script src="/js/toasts.js" defer></script>
	<script defer>
		$(document).ready(function () {
			// $('#levelsModal').modal({
			// 	backdrop: true, // Allows closing the modal by clicking outside of it
			// 	keyboard: true,  // Allows closing the modal by pressing the escape key
			// 	show: false
			// });

			console.log('setting upload nodal');
			// $('#uploadModal').modal({
			// 	backdrop: true, // Allows closing the modal by clicking outside of it
			// 	keyboard: true,  // Allows closing the modal by pressing the escape key
			// 	show: false
			// });
			console.log('setting done');
			$('.thumbnail, .uploaded-thumbnail').each(function () {
				var imageUrl = $(this).data('image-url');
				$(this).css('background-image', 'url(' + imageUrl + ')');
			});

			// $('#levelsModal').modal('hide');
			// $('#levelsModal').hide();

		});
	</script>

</body>

</html>